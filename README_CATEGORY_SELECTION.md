# Логика выбора категорий товаров

## Описание

Реализована новая логика выбора категорий при создании товаров, которая ограничивает выбор только категориями без подкатегорий.

## Правила выбора категорий

### ✅ Доступные для выбора категории:
1. **Категории без подкатегорий** - любые категории, у которых нет дочерних элементов

### ❌ Недоступные для выбора категории:
1. **Категории с подкатегориями** - любые категории, у которых есть дочерние элементы

## Визуальные индикаторы

- **Доступные категории**: отображаются нормально, можно кликать для выбора
- **Недоступные категории**: отображаются серым цветом с пометкой "(недоступно для выбора)", но можно кликать для разворачивания дерева

## Пример структуры категорий

```
Металлообработка ❌ (недоступно - есть подкатегории)
├── Токарные станки ❌ (недоступно - есть подкатегории)
│   ├── Токарно-винторезные станки ✅ (доступно - без подкатегорий)
│   ├── Токарно-карусельные станки ✅ (доступно - без подкатегорий)
│   └── Токарно-револьверные станки ✅ (доступно - без подкатегорий)
├── Фрезерные станки ❌ (недоступно - есть подкатегории)
│   ├── Горизонтально-фрезерные станки ✅ (доступно - без подкатегорий)
│   └── Вертикально-фрезерные станки ✅ (доступно - без подкатегорий)
└── Шлифовальные станки ✅ (доступно - без подкатегорий)

Деревообработка ❌ (недоступно - есть подкатегории)
├── Пилы ❌ (недоступно - есть подкатегории)
│   ├── Ленточные пилы ✅ (доступно - без подкатегорий)
│   └── Дисковые пилы ✅ (доступно - без подкатегорий)
└── Рейсмусы ✅ (доступно - без подкатегорий)

Электроника ❌ (недоступно - есть подкатегории)
├── Компьютеры ✅ (доступно - без подкатегорий)
└── Принтеры ✅ (доступно - без подкатегорий)

Шлифовальные станки по дереву ✅ (доступно - без подкатегорий)
Сверлильные станки ✅ (доступно - без подкатегорий)
Сварочное оборудование ✅ (доступно - без подкатегорий)
```

## Техническая реализация

### JavaScript функции:

1. **`isSelectableCategory(categoryId)`** - проверяет, является ли категория выбираемой (без подкатегорий)
2. **`getSelectableCategories()`** - возвращает список выбираемых категорий
3. **`selectNode(nodeId, nodeName)`** - обрабатывает выбор категории
4. **Обработчики событий** - проверяют доступность категории перед выбором и показывают предупреждение для недоступных

### CSS классы:

- `.treeselect-node.disabled` - стили для недоступных категорий
- `.treeselect-node.disabled:hover` - стили при наведении на недоступные категории

## Тестирование

### Запуск сидера с тестовыми данными:

```bash
php artisan db:seed --class=ProductCategoriesSeeder
```

### Проверка функциональности:

1. Откройте страницу создания товара
2. Попробуйте выбрать различные категории
3. Убедитесь, что:
   - Категории без подкатегорий можно выбирать
   - Категории с подкатегориями **нельзя выбрать** (показывается предупреждение)
   - Недоступные категории отображаются серым цветом
   - При клике на недоступную категорию с подкатегориями дерево разворачивается
   - При клике на недоступную категорию без подкатегорий показывается предупреждение

## Файлы, которые были изменены:

1. `resources/views/Product/ProductCreatePage.blade.php` - основная логика выбора категорий
2. `database/seeders/ProductCategoriesSeeder.php` - сидер для тестирования
3. `database/seeders/DatabaseSeeder.php` - добавлен новый сидер

## Подсказки для пользователя

- Добавлена иконка с подсказкой рядом с полем "Категория"
- Добавлен текст-подсказка под полем выбора категории
- При попытке выбрать недоступную категорию показывается информативное сообщение 